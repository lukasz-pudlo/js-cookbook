<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="highlighter.css" /> -->
    <style>
      .found {
        background-color: rgba(246, 246, 0, 0.707);
      }
      body {
        margin: 15px;
      }
      textarea {
        width: 100%;
        height: 350px;
      }
    </style>
  </head>
  <body>
    <h1>Creating a List of Frequent Words</h1>
    <form id="textsearch">
      <textarea id="incoming"></textarea>
      <p>Search pattern: <input id="pattern" type="text" /></p>
    </form>
    <!-- <button id="searchSubmit">Search for pattern</button> -->
    <div id="textResult"></div>
    <button id="generateListFrequentWords">
      Generate a list of frequent words
    </button>

    <button id="areArraysEqual">Check if arrays are equal</button>

    <script>
      // document.getElementById("searchSubmit").onclick = function () {
      //   // Get the search pattern
      //   const pattern = document.getElementById("pattern").value;
      //   const regex = new RegExp(pattern, "g");

      //   // Get the text to search
      //   const searchText = document.getElementById("incoming").value;

      //   let highlightedResult = "<pre>";
      //   let startPosition = 0;
      //   let endPosition = 0;

      //   //Find each match, and build the result
      //   const matches = searchText.matchAll(regex);
      //   for (const match of matches) {
      //     endPosition = match.index;

      //     highlightedResult += searchText.slice(startPosition, endPosition);

      //     highlightedResult += "<span class='found'>" + match[0] + "</span>";
      //     startPosition = endPosition + match[0].length;
      //   }

      //   highlightedResult += searchText.slice(startPosition);

      //   highlightedResult += "</pre>";

      //   document.getElementById("searchResult").innerHTML = highlightedResult;
      // };

      document.getElementById("generateListFrequentWords").onclick =
        function () {
          const userText = document.getElementById("incoming").value;
          // const pattern = ',';
          // const regex = new RegExp(pattern, 'g');

          const processedText = userText
            .toLowerCase()
            .replaceAll(",", "")
            .replaceAll(".", "")
            .replaceAll('"', "")
            .replaceAll("â€ž", "");

          let wordList = processedText.split(" ");
          // Before creating the set, organise the words in list by their frequency

          let wordObjects = [];

          // let wordSet = new Set(wordList);

          // Inititiate the first loop that checks each word in wordList
          for (let i = 0; i < wordList.length; i++) {
            let word = wordList[i],
              wordCount = 0;
            // The second loop is used to compare and count the occurrences of the word from the first loop
            for (let i = 0; i < wordList.length; i++) {
              let wordToCompare = wordList[i];
              if (word == wordToCompare) {
                wordCount += 1;
              }
            }
            wordObjects.push({ word, wordCount });
            // Clear the word count after each outer loop
            wordCount = 0;
          }

          // console.log(wordObjects);

          // Sort the words by order of frequency
          wordObjects.sort((a, b) => {
            return b.wordCount - a.wordCount;
          });

          console.log(wordObjects);

          let wordListElement = "<ul>";
          for (const word of wordList) {
            wordListElement += `<li> ${word} </li>`;
          }

          wordListElement += "</ul>";

          document.getElementById("textResult").innerHTML = wordListElement;
        };

      function countToTen() {
        let total = 0,
          count = 1;
        while (count <= 10) {
          total += count;
          count += 1;
        }
        console.log(total);
      }

      let arrayOne = ["coca-cola", "pepsi-cola", "coke"];
      let arrayTwo = ["coca-cola", "pepsi-cola", "coke"];
      let arrayThree = ["coca-cola", "pepsi-cola", "fanta"];

      let prices = ["10", "5", "25"];

      function areArraysEqual(arrayA, arrayB) {
        // First check if they are arrays
        if (!Array.isArray(arrayA) || !Array.isArray(arrayB)) {
          return false;
        }
        // Check if they are just two references pointing to the same array
        else if (arrayA === arrayB) {
          return true;
        }
        // Check if they have the same length
        else if (arrayA.length !== arrayB.length) {
          return false;
        } else {
          for (let i = 0; i < arrayA.length; ++i) {
            if (arrayA[i] !== arrayB[i]) return false;
          }
          return true;
        }
      }
    </script>

    <!-- <script src="highlighter.js"></script> -->
  </body>
</html>

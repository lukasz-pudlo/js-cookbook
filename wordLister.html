<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="highlighter.css" /> -->
    <style>
      .found {
        background-color: rgba(246, 246, 0, 0.707);
      }
      body {
        margin: 15px;
      }
      textarea {
        width: 100%;
        height: 350px;
      }
    </style>
  </head>
  <body>
    <h1>Creating a List of Frequent Words</h1>
    <form id="textsearch">
      <textarea id="incoming"></textarea>
      <p>Search pattern: <input id="pattern" type="text" /></p>
    </form>
    <!-- <button id="searchSubmit">Search for pattern</button> -->
    <div id="textResult"></div>
    <button id="generateListFrequentWords">
      Generate a list of frequent words
    </button>

    <button id="areArraysEqual">Check if arrays are equal</button>

    <button id="runTest">Run Test</button>

    <button id="anotherTest">Another Test</button>

    <script>
      // document.getElementById("searchSubmit").onclick = function () {
      //   // Get the search pattern
      //   const pattern = document.getElementById("pattern").value;
      //   const regex = new RegExp(pattern, "g");

      //   // Get the text to search
      //   const searchText = document.getElementById("incoming").value;

      //   let highlightedResult = "<pre>";
      //   let startPosition = 0;
      //   let endPosition = 0;

      //   //Find each match, and build the result
      //   const matches = searchText.matchAll(regex);
      //   for (const match of matches) {
      //     endPosition = match.index;

      //     highlightedResult += searchText.slice(startPosition, endPosition);

      //     highlightedResult += "<span class='found'>" + match[0] + "</span>";
      //     startPosition = endPosition + match[0].length;
      //   }

      //   highlightedResult += searchText.slice(startPosition);

      //   highlightedResult += "</pre>";

      //   document.getElementById("searchResult").innerHTML = highlightedResult;
      // };

      document.getElementById("generateListFrequentWords").onclick =
        function () {
          const userText = document.getElementById("incoming").value;
          // const pattern = ',';
          // const regex = new RegExp(pattern, 'g');

          const processedText = userText
            .toLowerCase()
            .replaceAll(",", "")
            .replaceAll(".", "")
            .replaceAll('"', "")
            .replaceAll("â€ž", "");

          let wordList = processedText.split(" ");
          // Before creating the set, organise the words in list by their frequency

          let wordObjects = [];

          // let wordSet = new Set(wordList);

          // Inititiate the first loop that checks each word in wordList
          for (let i = 0; i < wordList.length; i++) {
            let word = wordList[i],
              wordCount = 0;
            // The second loop is used to compare and count the occurrences of the word from the first loop
            for (let i = 0; i < wordList.length; i++) {
              let wordToCompare = wordList[i];
              if (word == wordToCompare) {
                wordCount += 1;
              }
            }
            wordObjects.push({ word, wordCount });
            // Clear the word count after each outer loop
            wordCount = 0;
          }

          // console.log(wordObjects);

          // Sort the words by order of frequency
          wordObjects.sort((a, b) => {
            return b.wordCount - a.wordCount;
          });

          console.log(wordObjects);

          // let wordObjectsCopy = wordObjects.map((element) => ({ ...element }));
          // console.log(wordObjectsCopy);

          // let objsAndCopy = [...wordObjects, ...wordObjectsCopy];
          // console.log(objsAndCopy);

          // let aWord = wordObjects.filter((word) => word.wordCount > 1);
          // console.log(aWord);

          let listFromObject = wordObjects.map(Object.values);
          console.log(listFromObject);
          stringifiedList = JSON.stringify(listFromObject);

          // Look at the first element of each entry looked at in the loop, which is now looking at an array consisting of lists
          // let wordsListfromObject = [];

          // for (i = 0; i < listFromObject.length; ++i) {
          //   let word = listFromObject[i][0];
          //   wordslistFromObject.push(word);
          // }
          // console.log(wordsListfromObject);

          // function startsWithD(word) {
          //   return wordObjects
          // }

          const numbers = [500, 0, 2, 8, 256, 78, 800, 99, 102];

          // const reducerFunction = function (accumulator, element) {
          //   // Add the current value to the running total in the accumulator.
          //   const newTotal = accumulator + element;
          //   return newTotal;
          // };

          // const total = numbers.reduce(reducerFunction, 0);
          // console.log(total);

          // Explanation for myself of how I think the below function that returns the highest value in the array works.
          // The function looks at each element of the array and compares the values stored in acc and val. Since, the reducer function
          // wasn't supplied with an extra argument (as was in the one above, where the reduce function
          // was supplied the callback function reducerFunction and 0 after it, which means that the accumulator was set to 0 instead
          // of being set to the value of the first element in the array), the value of acc is set to the value of the first element
          // in the array. The reduce function checks whether acc is greater than val and returns acc if it is or val if it isn't.
          // By returning the acc, I mean that it is stored in its memory until the end of the array. Until it has stepped through or
          // looked at all elements in the array. This means that the result of the evaluation isn't lost and if after having looked at
          // all elements in the array, it doesn't find a val that is larger than the currently stored value of acc, acc is returned at the
          // end.
          // const max = numbers.reduce((acc, val) => (acc > val ? acc : val));
          // console.log(max);

          // const average =
          //   numbers.reduce((acc, val) => acc + val, 0) / numbers.length;

          // console.log(average);

          // const maxSpread = Math.max(...numbers);
          // console.log(`The maximum value is ${maxSpread}`);

          // const containsLettersOnly = function (element) {
          //   const textExp = /^[a-zA-Z]+$/;
          //   return textExp.test(element);
          // };

          // const mysteryItems = ["**", 123, "aaa", "abc", "-", 46, "AAA"];

          // let result = mysteryItems.every(containsLettersOnly);
          // console.log(result);

          // let wordListElement = "<ul>";
          // for (const word of wordList) {
          //   wordListElement += `<li> ${word} </li>`;
          // }

          wordListElement += "</ul>";

          document.getElementById("textResult").innerHTML = wordListElement;
        };

      document
        .getElementById("runTest")
        .addEventListener("click", buttonClicked);

      function buttonClicked() {
        setTimeout(showMessage, 2000);
      }

      function showMessage() {
        console.log("You clicked the button 2 seconds ago");
      }

      document
        .getElementById("anotherTest")
        .addEventListener("click", anotherButtonClicked);

      function anotherButtonClicked() {
        setTimeout(showAnotherMessage, 1000);
      }

      function showAnotherMessage() {
        console.log("This is another message - clicked 1 second ago");
      }

      function countToTen() {
        let total = 0,
          count = 1;
        while (count <= 10) {
          total += count;
          count += 1;
        }
        console.log(total);
      }

      let arrayOne = ["coca-cola", "pepsi-cola", "coke"];
      let arrayTwo = ["coca-cola", "pepsi-cola", "coke"];
      let arrayThree = ["coca-cola", "pepsi-cola", "fanta"];

      let prices = ["10", "5", "25"];

      function areArraysEqual(arrayA, arrayB) {
        // First check if they are arrays
        if (!Array.isArray(arrayA) || !Array.isArray(arrayB)) {
          return false;
        }
        // Check if they are just two references pointing to the same array
        else if (arrayA === arrayB) {
          return true;
        }
        // Check if they have the same length
        else if (arrayA.length !== arrayB.length) {
          return false;
        } else {
          for (let i = 0; i < arrayA.length; ++i) {
            if (arrayA[i] !== arrayB[i]) return false;
          }
          return true;
        }
      }
    </script>

    <!-- <script src="highlighter.js"></script> -->
  </body>
</html>

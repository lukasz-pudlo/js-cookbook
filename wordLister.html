<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="highlighter.css" /> -->
    <style>
      .found {
        background-color: rgba(246, 246, 0, 0.707);
      }
      body {
        margin: 15px;
      }
      textarea {
        width: 100%;
        height: 350px;
      }
    </style>
  </head>
  <body>
    <h1>Creating a List of Frequent Words</h1>
    <form id="textsearch">
      <textarea id="incoming"></textarea>
      <p>Search pattern: <input id="pattern" type="text" /></p>
    </form>
    <!-- <button id="searchSubmit">Search for pattern</button> -->
    <div id="textResult"></div>
    <button id="generateListFrequentWords">
      Generate a list of frequent words
    </button>

    <button id="areArraysEqual">Check if arrays are equal</button>

    <button id="runTest">Run Test</button>

    <input type="text" id="power" /><button id="toPower">
      Enter the power
    </button>
    <div id="counterDiv"></div>

    <script>
      // Check if this is correct
      function fibonacci(n) {
        return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
      }

      // Still in progress
      function fibonacciFn(n) {
        let nPrevious = 0;
        let nSecondPrevious = 0;
        let result = 0;
        if (n <= 1) {
          result = n;
        } else {
          nPrevious = 1;
          nSecondPrevious = 0;
          for (number = 1; number < n; ++number) {
            result = nPrevious + nSecondPrevious;
            nSecondPrevious = nPrevious;
            nPrevious = result;
          }
        }
        return result;
      }

      function factorial(n) {
        return n <= 1 ? 1 : n * factorial(n - 1);
      }

      function factorialFn(n) {
        let result = 1;
        for (let number = 1; number < n; ++number) {
          result = result * (number + 1);
        }

        return result;
      }

      // function Counter(from, to, divElement) {
      //   this.currentCount = from;
      //   this.finishCount = to;
      //   this.element = divElement;

      //   this.incrementCounter = function () {
      //     this.currentCount -= 1;
      //     this.element.textContent = this.currentCount;

      //     if (this.currentCount > this.finishCount) {
      //       setTimeout(this.incrementCounter.bind(this), 1000);
      //     }
      //   };
      //   this.startCounter = function () {
      //     this.incrementCounter();
      //   };
      // }

      // const counter = new Counter(20, 0, document.getElementById("counterDiv"));

      // window.onload = function () {
      //   counter.startCounter();
      // };

      // window.onload = function () {
      //   window.name = window;

      //   const newObject = {
      //     name: "object",

      //     sayGreeting: function () {
      //       console.log(`Now this is easy, ${this.name}`);

      //       const nestedGreeting = function (greeting) {
      //         console.log(`${greeting} ${this.name}`);
      //       }.bind(this);

      //       nestedGreeting("hello");
      //     },
      //   };
      //   newObject.sayGreeting();
      // };

      // function partial(fn, ...args) {
      //   return function (...restArgs) {
      //     return fn(...args, restArgs);
      //   };
      // }

      // function raiseToPower(exponent, number) {
      //   return number ** exponent;
      // }

      // const cubeIt = partial(raiseToPower, 3);

      // function makeString(prefix, suffix, str) {
      //   return `${prefix}${str}${suffix}`;
      // }

      // const named = partial(makeString, "&#", ";");

      // const namedBound = makeString.bind(undefined, "&#", ";");

      // const cubeItBound = raiseToPower.bind(undefined, 3);

      // console.log(cubeIt(9));

      // function createCounter() {
      //   let count = 0;
      //   function counter() {
      //     count += 1;
      //     console.log(count);
      //   }
      //   return counter;
      // }
      // const counterFunction = createCounter();
      // document.getElementById("searchSubmit").onclick = function () {
      //   // Get the search pattern
      //   const pattern = document.getElementById("pattern").value;
      //   const regex = new RegExp(pattern, "g");

      //   // Get the text to search
      //   const searchText = document.getElementById("incoming").value;

      //   let highlightedResult = "<pre>";
      //   let startPosition = 0;
      //   let endPosition = 0;

      //   //Find each match, and build the result
      //   const matches = searchText.matchAll(regex);
      //   for (const match of matches) {
      //     endPosition = match.index;

      //     highlightedResult += searchText.slice(startPosition, endPosition);

      //     highlightedResult += "<span class='found'>" + match[0] + "</span>";
      //     startPosition = endPosition + match[0].length;
      //   }

      //   highlightedResult += searchText.slice(startPosition);

      //   highlightedResult += "</pre>";

      //   document.getElementById("searchResult").innerHTML = highlightedResult;
      // };
      document
        .getElementById("generateListFrequentWords")
        .addEventListener("click", generateListFrequentWords);

      function generateListFrequentWords() {
        const userText = document.getElementById("incoming").value;
        // const pattern = ',';
        // const regex = new RegExp(pattern, 'g');

        const processedText = userText
          .toLowerCase()
          .replaceAll(",", "")
          .replaceAll(".", "")
          .replaceAll('"', "")
          .replaceAll("„", "");

        let wordList = processedText.split(" ");
        // Before creating the set, organise the words in list by their frequency

        let wordObjects = [];

        // let wordSet = new Set(wordList);

        // Inititiate the first loop that checks each word in wordList
        for (let i = 0; i < wordList.length; i++) {
          let word = wordList[i],
            wordCount = 0;
          // The second loop is used to compare and count the occurrences of the word from the first loop
          for (let i = 0; i < wordList.length; i++) {
            let wordToCompare = wordList[i];
            if (word == wordToCompare) {
              wordCount += 1;
            }
          }
          wordObjects.push({ word, wordCount });
          // Clear the word count after each outer loop
          wordCount = 0;
        }

        // console.log(wordObjects);

        // Sort the words by order of frequency
        wordObjects.sort((a, b) => {
          return b.wordCount - a.wordCount;
        });

        const wordObjectsKeys = Reflect.ownKeys(wordObjects);

        let newWordList = [];

        for (let i = 0; i < wordObjects.length; i++) {
          newWordList.push(wordObjects[i].word);
        }

        // newWordList = new Set(newWordList);
        // wordArray = Array.from(newWordList);

        let wordArray = [...new Set(newWordList)];

        // console.log(wordArray);

        const dictionary = new Object();

        wordArray.forEach((word) => {
          dictionary.word;
        });

        // console.log(dictionary);

        for (const property of wordObjectsKeys) {
          console.log(`Property: ${property}, Value: ${wordObjects[property]}`);
        }

        const address = {
          country: "Poland",
          streetName: "Sądowa",
          streetNumber: "7",
        };

        const customer = {
          name: "Weronika",
          lastName: "Czaszowiczyńska",
        };

        const customerAddress = { ...customer, ...address };
        console.log(customerAddress);

        const data = {};

        Object.defineProperty(data, "type", {
          value: "primary",
          enumerable: true,
        });

        Object.defineProperty(data, "id", {
          value: 1,
          writable: true,
        });

        // for (prop in data) {
        //   console.log(prop);
        // }

        // const product = {
        //   name: "banana",
        // };

        // const propertyChecker = {
        //   set: function (target, property, value) {
        //     if (property === "price") {
        //       if (typeof value !== "number") {
        //         throw new TypeError("Price is not a number");
        //       } else if (value <= 0) {
        //         throw new RangeError("Price must be greater than zero");
        //       }
        //     } else if (property !== "name") {
        //       throw new ReferenceError(`Property '${property}' is not valid`);
        //     }
        //     target[property] = value;
        //   },
        // };

        // const proxy = new Proxy(product, propertyChecker);

        // proxy.name = "apple";
        // proxy.price = 10;
        // proxy.category = "organic";
        // console.log(product);

        // const handler = {
        //   get: function (array, index) {
        //     if (array[index] === 0) {
        //       return false;
        //     } else {
        //       return true;
        //     }
        //   },
        // };

        // const numbers = [0, 1, 0, 0];

        // const proxy = new Proxy(numbers, handler);

        // function enumeratorFunction(item) {
        //   console.log(proxy[item]);
        // }

        // numbers.forEach(enumeratorFunction);

        // const animal = {
        //   name: "Red Fox",
        //   class: "Mammalia",
        //   order: "Carnivora",
        //   family: "Canidae",
        //   genus: "Vulpes",
        //   species: "Vulpes vulpes",
        // };

        // // const animalCopy = { ...animal };
        // const animalCopy = Object.assign({}, animal);

        // console.log(`This is the original object:
        // ${animal.name}
        // and this is the copy:
        // ${animalCopy.name}`);

        // const student = {
        //   firstName: "Lukasz",
        //   lastName: "Pudlo",
        //   scores: [70, 85, 76, 99, 78],
        // };

        // function cloneStudent(student) {
        //   const studentCopy = { ...student };
        //   studentCopy.scores = [...studentCopy.scores];
        //   return studentCopy;
        // }

        // const studentCopy = cloneStudent(student);

        // studentCopy.scores[0] = 80;

        // console.log(student.scores[0]);
        // console.log(studentCopy.scores[0]);

        class Student {
          constructor(firstName, lastName, testScores) {
            (this.firstName = firstName),
              (this.lastName = lastName),
              (this.testScores = testScores);
          }
          clone() {
            return new Student(this.firstName, this.lastName, [
              ...this.testScores,
            ]);
          }
        }

        const student = new Student("Lukasz", "Pudlo", [78, 87, 98, 88, 100]);
        const studentCopy = student.clone();

        studentCopy.testScores[0] = 99;

        console.log(student.testScores[0]);
        console.log(studentCopy.testScores[0]);

        const newObj = {};

        const uniqueId = Symbol();
        newObj[uniqueId] = "No two alike";

        const anotherUniqueId = Symbol();
        newObj[anotherUniqueId] = "This will not clash either";

        console.log(newObj);

        // async function translate(text) {
        //   let res = await axios.post(
        //     `https://translation.googleapis.com/language/translate/v2?key=${
        //       api - key
        //     }`,
        //     { q: text, target: "en" }
        //   );
        //   let translation = res.data.data.translations[0].translatedText;
        //   return translation;
        // }

        // let translatedVue = translate("vue");
        // console.log(translatedVue);

        // console.log(wordObjects[0].word);

        // console.log(wordObjectsKeys);

        // let wordObjectsCopy = wordObjects.map((element) => ({ ...element }));
        // console.log(wordObjectsCopy);

        // let objsAndCopy = [...wordObjects, ...wordObjectsCopy];
        // console.log(objsAndCopy);

        // let aWord = wordObjects.filter((word) => word.wordCount > 1);
        // console.log(aWord);

        // let listFromObject = wordObjects.map(Object.values);
        // console.log(listFromObject);
        // stringifiedList = JSON.stringify(listFromObject);

        // Look at the first element of each entry looked at in the loop, which is now looking at an array consisting of lists
        // let wordsListfromObject = [];

        // for (i = 0; i < listFromObject.length; ++i) {
        //   let word = listFromObject[i][0];
        //   wordslistFromObject.push(word);
        // }
        // console.log(wordsListfromObject);

        // function startsWithD(word) {
        //   return wordObjects
        // }

        // const reducerFunction = function (accumulator, element) {
        //   // Add the current value to the running total in the accumulator.
        //   const newTotal = accumulator + element;
        //   return newTotal;
        // };

        // const total = numbers.reduce(reducerFunction, 0);
        // console.log(total);

        // Explanation for myself of how I think the below function that returns the highest value in the array works.
        // The function looks at each element of the array and compares the values stored in acc and val. Since, the reducer function
        // wasn't supplied with an extra argument (as was in the one above, where the reduce function
        // was supplied the callback function reducerFunction and 0 after it, which means that the accumulator was set to 0 instead
        // of being set to the value of the first element in the array), the value of acc is set to the value of the first element
        // in the array. The reduce function checks whether acc is greater than val and returns acc if it is or val if it isn't.
        // By returning the acc, I mean that it is stored in its memory until the end of the array. Until it has stepped through or
        // looked at all elements in the array. This means that the result of the evaluation isn't lost and if after having looked at
        // all elements in the array, it doesn't find a val that is larger than the currently stored value of acc, acc is returned at the
        // end.
        // const max = numbers.reduce((acc, val) => (acc > val ? acc : val));
        // console.log(max);

        // const average =
        //   numbers.reduce((acc, val) => acc + val, 0) / numbers.length;

        // console.log(average);

        // const maxSpread = Math.max(...numbers);
        // console.log(`The maximum value is ${maxSpread}`);

        // const containsLettersOnly = function (element) {
        //   const textExp = /^[a-zA-Z]+$/;
        //   return textExp.test(element);
        // };

        // const mysteryItems = ["**", 123, "aaa", "abc", "-", 46, "AAA"];

        // let result = mysteryItems.every(containsLettersOnly);
        // console.log(result);

        let wordListElement = "<ul>";

        for (const word of wordArray) {
          wordListElement += `<li> ${word} </li>`;
        }

        wordListElement += "</ul>";

        document.getElementById("textResult").innerHTML = wordListElement;
      }

      document
        .getElementById("runTest")
        .addEventListener("click", buttonClicked);

      const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

      function buttonClicked() {
        function logTime(time) {
          console.log(`Logging at: ${time.toLocaleTimeString()}`);
        }

        console.log("About to call callYouBack()");
        callYouBack(logTime);
        console.log("All finished");

        function callYouBack(callbackFunction) {
          callbackFunction(new Date());
          console.log("Ending callYouBack()");
        }
      }

      const dynamicProperty = "nickname";
      const dynamicPropertyValue = "The Izz";

      const i = 10;

      const employee = {
        firstName: "Lisa",
        [dynamicProperty]: dynamicPropertyValue,
        ["sequence" + i]: 1,
      };

      const address = {
        country: "Poland",
        city: "Warsaw",
        streetNum: "102",
        streetName: "Marszałkowska",
      };

      // function buttonClicked() {
      //   setTimeout(showMessage, 2000);
      // }

      // function showMessage() {
      //   console.log(
      //     "This is the message for which you had to wait two seconds"
      //   );
      // }

      // function buttonClicked() {
      // let power = document.getElementById("power").value;
      // // function powerNumber(number) {
      // //   return number ** power;
      // // }
      // // const powerNumbers = numbers.map(powerNumber);
      // // console.log(powerNumbers);
      // const powerNumbers = numbers.map((number) => number ** power);
      // console.log(powerNumbers);
      // const myFunc = (number) => number ** 2;
      // const result = numbers.map(myFunc);
      // console.log(result);
      // function raiseToPower(number, power) {
      //   return number ** power;
      // }
      // const myFunc = (number, power) => number ** power;
      // const result = myFunc(10, 3);
      // console.log(result);
      // function dateDifferenceInSeconds(
      //   newerDate,
      //   olderDate,
      //   { discardTime, discardYears, precision } = {}
      // ) {
      //   if (discardTime) {
      //     newerDate = newerDate.setHours(0, 0, 0, 0);
      //     olderDate = olderDate.setHours(0, 0, 0, 0);
      //   }
      //   if (discardYears) {
      //     newerDate = newerDate.setYear(0);
      //     olderDate = olderDate.setYear(0);
      //   }
      //   const differenceInSeconds =
      //     (newerDate.getTime() - olderDate.getTime()) / 1000;
      //   return differenceInSeconds.toFixed(precision);
      // }
      // const newDate = new Date();
      // const oldDate = new Date(2010, 1, 10);
      // let difference = dateDifferenceInSeconds(newDate, oldDate);
      // console.log(difference);
      // function greetingMaker(greeting) {
      //   function addName(name) {
      //     return `${greeting} ${name}`;
      //   }
      //   return addName;
      // }
      // const dayTimeGreeting = greetingMaker("Have a Good Day");
      // const nightTimeGreeting = greetingMaker("Have a Good Evening");
      // const completeGreeting = dayTimeGreeting("Paul");
      // console.log(completeGreeting);
      // }

      // function buttonClicked() {
      //   setTimeout(showMessage, 1000);
      // }

      // function showMessage() {
      //   console.log("You clicked this button exactly one second ago!");
      // }

      // function buttonClicked() {
      //   const timeoutCallback = function showMessage() {
      //     console.log(
      //       "(Using pattern 2) You clicked this message 1 second ago"
      //     );
      //   };
      //   setTimeout(timeoutCallback, 1000);
      // }

      // function buttonClicked() {
      //   setTimeout(function showMessage() {
      //     console.log("Pattern number 3: You clicked this button a second ago");
      //   }, 1000);
      // }

      // function buttonClicked() {
      //   setTimeout(showMessage, 500);
      // }

      // function showMessage() {
      //   console.log(
      //     "This is another message, this time it should appear sooner"
      //   );
      // }

      // function buttonClicked() {
      //   const timeoutCallback = function () {
      //     console.log(
      //       "This a timed out message using the second pattern of calling a function from another function"
      //     );
      //   };
      //   setTimeout(timeoutCallback, 500);
      // }

      // function buttonClicked() {
      //   setTimeout(function showMessage() {
      //     console.log(
      //       "This message has been generated using the third pattern. The button was clicked half a second ago"
      //     );
      //   }, 500);
      // }

      // function buttonClicked() {
      //   function logTime(time) {
      //     console.log(`Logging at: ${time.toLocaleTimeString()}`);
      //   }

      //   console.log("About to call callYouBack()");
      //   callYouBack(logTime);
      //   console.log("All finished");
      // }

      // function callYouBack(callbackFunction) {
      //   console.log("Starting callYouBack()");
      //   callbackFunction(new Date());

      //   console.log("Ending callYouBack()");
      // }

      // const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

      // function buttonClicked() {
      //   // function squareNumber(number) {
      //   //   return number ** 2;
      //   // }

      //   // const squares = numbers.map(squareNumber);
      //   // const squares = numbers.map((number) => number ** 2);
      //   // console.log(`This is the result of the arrow function: ${squares}`);
      //   // const myFunc = (number) => number ** 2;
      //   // const squaredNumber = myFunc(5);
      //   // console.log(squaredNumber);

      //   const myFunc = (number, power) => number ** power;
      //   const squaredNumber = myFunc(10, 3);
      //   console.log(squaredNumber);
      // }

      // function buttonClicked() {
      //   function logTime(time) {
      //     console.log(`Logging at: ${time.toLocaleTimeString()}`);
      //   }
      //   console.log(`About to call callYouBack()`);
      //   callYouBack(logTime);
      //   console.log(`All done`);
      // }

      // function callYouBack(callbackFunction) {
      //   console.log(`Starting callYouBack()`);
      //   callbackFunction(new Date());
      //   console.log("Ending callYouBack");
      // }

      // function buttonClicked() {
      //   function logTime(time) {
      //     console.log(`Logging at: ${time.toLocaleTimeString()}`);
      //   }
      //   console.log("About to call callYouBack()");
      //   callYouBack(logTime);
      //   console.log("All done");
      // }

      // function callYouBack(callbackFunction) {
      //   console.log("Starting callYouBack()");
      //   callbackFunction(new Date());
      //   console.log("Ending callYouBack()");
      // }

      function greetingMaker(greeting) {
        function addName(name) {
          return `${greeting} ${name}`;
        }
        return addName;
      }

      const dayTimeGreeting = greetingMaker("Morning");

      // function buttonClicked() {
      //   const sentence =
      //     "This is one sentence. This is a sentence with a list of items:" +
      //     "cherries, oranges, apples, bananas. That was the list of items.";

      //   const start = sentence.indexOf(":");
      //   const end = sentence.indexOf(".", start + 1);

      //   console.log(start);
      //   console.log(end);
      // }

      function countToTen() {
        let total = 0,
          count = 1;
        while (count <= 10) {
          total += count;
          count += 1;
        }
        console.log(total);
      }

      let arrayOne = ["coca-cola", "pepsi-cola", "coke"];
      let arrayTwo = ["coca-cola", "pepsi-cola", "coke"];
      let arrayThree = ["coca-cola", "pepsi-cola", "fanta"];

      let prices = ["10", "5", "25"];

      function areArraysEqual(arrayA, arrayB) {
        // First check if they are arrays
        if (!Array.isArray(arrayA) || !Array.isArray(arrayB)) {
          return false;
        }
        // Check if they are just two references pointing to the same array
        else if (arrayA === arrayB) {
          return true;
        }
        // Check if they have the same length
        else if (arrayA.length !== arrayB.length) {
          return false;
        } else {
          for (let i = 0; i < arrayA.length; ++i) {
            if (arrayA[i] !== arrayB[i]) return false;
          }
          return true;
        }
      }
    </script>

    <!-- <script src="highlighter.js"></script> -->
  </body>
</html>
